## 01. 협력하는 객체들의 공동체

- 객체지향의 목표는 실세계의 모방이 아니다. 오히려 새로은 세계를 창조하는 것이다.

- 객체지향 프로그래밍을 하는 소프트웨어 개발자의 역할은 단순히 실세계를 소프트웨어로 옮겨 담는 것이 아니라 고객과 사용자를 만족시킬 수 있는 신세계를 창조하는 것이다.

## 협력하는 사람들

### 커피 공화국의 아침

커피 공화국은 세 분류의 사람이 있다. 이 세 분류의 사람들은 각자의 역할과 책임을 갖고 있으며, **커피 주문**이라는 협력에 참여하고 있다.

#### 역할

- 커피를 주문하는 손님
- 주문을 받는 캐시어
- 커피를 만드는 바리스타

#### 책임

- 손님은 커피를 주문한다.
- 캐시어는 주문을 받는다.
- 바리스타는 커피를 제조한다.

#### 협력

- 손님, 캐시어, 바리스타는 모두 **커피 주문**이라는 협력에 참여하고 있다.
- 모든 사람들은 협력의 목표 안에서 맡은 바 **역할**과 **책임**을 다하고 있다.

### 요청과 응답으로 구성된 협력

#### 요청

- 스스로 해결하지 못하는 문제와 마주쳤을 때 문제 해결에 필요한 지식을 알고 있거나 서비스를 제공해줄 수 있는 사람에게 도움을 **요청**한다.
- 일반적으로 하나의 문제 해결을 위해 다수의 역할이 필요하다.
- 때문에 요청은 보통 연쇄적으로 발생한다.

#### 응답

- 요청을 받은 사람은 주어진 책임을 다하면서 필요한 지식이나 서비스를 제공한다. 즉 **응답**한다.
- 요청이 들어온 방향의 반대 방향으로 연쇄적으로 발생한다.

> - **요청**과 **응답**을 통해 다른 사람과 **협력**하는 능력은 거대하고 복잡한 문제 해결을 가능하게 한다.

> - 협력의 성공은 역할을 맡은 각 개인이 얼마나 요청을 성실히 이행하는가에 달려있다.

### 역할과 책임

#### 역할

- 어떤 협력에 참여하는 특정한 사람이 협력 안에서 차지하는 책임이나 임무를 의미한다.
- 손님은 커피 주문 임무를, 캐시어는 손님으로부터 주문을 받아야 하는 임무를, 바리스타는 캐시어에게 전달 받은 주문된 커피를 제조해야 할 책임이 있다.

#### 책임

- 역할을 가진 사람이 마땅히 가져야 할 의무같은 것이다.
- 특정한 역할은 특정한 책임을 암시한다.
- 역할과 책임은 협력이 원활하게 진행되는 것에 있어서 핵심적인 구성 요소다.

협력을 위해 특정한 역할을 맡고 역할에 적합한 책임을 수행한다는 것은 중요한 개념을 제시한다.

1. 여러 사람이 동일한 역할을 수행할 수 있다.
2. 역할은 대체 가능성을 의미한다.
3. 책임을 수행하는 방법은 자율적으로 선택할 수 있다.
4. 한 사람이 동시에 여러 역할을 수행할 수 있다.

## 역할, 책임, 협력

### 기능을 구현하기 위해 협력하는 객체들

- 위 커피 공화국의 개념을 객체지향 관점인 단어로 변경한다면 대부분의 설명을 객체지향이라는 문맥으로 옮겨올 수 있다.
- 객체 ➡️ 사람
- 요청 ➡️ 메세지
- 요청을 처리하는 방법 ➡️ 메서드
- 이것이 사람들이 객체지향을 설명하기 위해 실세계의 모방이라는 은유를 차용하는 이유다.

### 역할과 책임을 수행하며 협력하는 객체들

- **협력**의 핵심은 특정한 **책임**을 수행하는 **역할**들 간의 **연쇄적인 요청과 응답**을 통해 목표를 달성한다는 것이다.
- 일상 생활에서 목표는 사람들의 **협력**을 통해서 달성된다.
- 목표를 이루기 위해서 각자가 맡을 수 있는 **책임**으로 분할된다.
- 책임은 그 책임을 수행할 수 있는 **역할**을 가진 사람에 의해 수행된다.
- 각 **역할**들은 책임을 수행하기 위해 다른 사람에게 도움을 **요청**하기도 하며, 요청에 **응답**하기도 한다.

이 과정은 객체 세계도 크게 다를 바가 없다. 애플리케이션의 기능을 수행하기 위해 협력한다.

- 애플리케이션의 기능은 더 작은 **책임**으로 분할된다.
- 책임은 적절한 **역할**을 수행할 수 있는 객체에 의해 수행된다.
- 객체는 책임을 수행하는 과정에서 다른 객체에게 도움을 요청하기도 한다.

> 객체지향 설계라는 것은 적절한 객체에게 얼마나 적절한 책임을 할당하는 것에서 시작된다. 얼마나 적절한 책임을 선택하느냐에 따라 애플리케이션의 아름다움이 결정된다.

객체의 역할은 사람의 역할과 유사하다.

- 여러 객체가 동일한 역할을 수행할 수 있다.
- 역할은 대체 가능성을 의미한다.
- 각 객체는 책임을 수행하는 방법을 자율적으로 선택 가능하다.
- 하나의 객체가 동시에 여러 역할을 할 수 있다.

## 협력 속에 사는 객체

- 객체지향 애플리케이션의 윤곽을 결정하는 것은 역할, 책임, 협력이지만 실제로 참여하는 주체는 **객체**다.
- 객체는 애플리케이션의 기능을 구현하기 위해서 존재한다.
- 객체지향의 아름다움은 협력이 결정하지만 협력이 얼마나 조화를 이루는지는 객체가 결정한다. 결국 협력의 품질을 결정하는 것은 객체의 품질이다.

#### 객체의 2가지 덕목

1. 객체는 **협력적**이어야 한다.

- 협력적이라는 것은 다른 객체의 명령에 따라 행동하는 것을 의미하는 게 아니다.
- 객체는 다른 객체의 요청에 응답하는 것이라는 의미이다.
- 어떤 방식으로 응답할지는 객체가 결정한다.
- 심지어 요청에 대한 응답 여부도 객체가 결정한다.

2. 객체는 **자율적**이어야 한다.

- 객체는 공동의 목표를 달성하기 위해서 협력에 참여하지만 스스로의 결정과 판단에 따라 행동해야 한다.
- 객체지향 설계의 묘미는 다른 객체와 협력할 수 있게 개방적인 동시에 협력에 참여하는 방법을 스스로 결정할 수 있는 자율적인 객체들의 공동체를 설계하는 것에 있다.

### 상태와 행동을 함께 지닌 자율적인 객체

- 객체는 **상태**와 **행동**을 함께 지닌 실체다.
- 객체가 협력을 위해 어떤 **행동**을 해야 한다면 그 **행동을 하기 위해 필요한 상태도 함께 지녀야 한다.**
- 객체의 자율성은 객체의 내부와 외부를 구분하는 것으로부터 나온다.
- 객체의 사적인 부분은 객체 스스로 관리하고 외부에서 일체 간섭할 수 없도록 차단해야 한다.
- 객체의 외부에서는 객체가 허락한 수단만을 통해서 객체와 소통해야 한다.
- 객체는 다른 객체가 **무엇**을 수행하는지는 알아도 **어떻게** 수행하는지는 알 수 없다.
- 객체의 관점에서 자율성이란 자신의 상태를 직접 관리하고 상태를 기반으로 판단하고 행동할 수 있음을 의미한다.
- 예를 들어서 **바리스타(객체)** 는 **커피 제조 방법을 기억하는 상태**여야 한다.
- 또한 **바리스타(객체)** 는 **커피 제조(행동)**를 스스로 결정한다.

#### 과거의 전통적인 개발 vs 객체지향 개발

- 과거의 전통적인 개발은 데이터, 프로세스를 엄격하게 구분한다.
- 객체지향 개발에서는 데이터와 프로세스를 객체라는 하나의 틀 안에 묶어놓는다.

### 협력과 메세지

#### 메세지

- 객체가 다른 객체와 의사소통하는 수단
- 한 객체가 다른 객체에게 요청하는 것을 메세지를 전송한다고 말한다.
- 다른 객체로부터 요청을 받는 것을 메세지를 수신한다고 말한다.
- 따라서 객체지향 세계의 협력은 메세지를 전송하는 객체와 메세지를 수신하는 객체의 관계로 구성된다.
- 메세지를 전송하는 객체 = 송신자(sender)
- 메세지를 수신하는 객체 = 수신자(receiver)

### 메서드와 자율성

#### 메서드

- 객체가 수신된 메세지를 처리하는 방법
- 어떤 객체에게 메세지를 전송하면 메세지에 대응되는 특정 메서드가 실행된다.
- 메세지를 수신한 객체가 실행 시간에 메서드를 선택 가능하다.
- 이는 객체지향 프로그래밍 언어를 구분 짓는 핵심 특징이다.

외부의 요청이 무엇인지를 표현하는 **메세지**
메세지의 담긴 요청을 처리하기 위한 구체적인 방법인 **메서드**
이 둘을 분리하는 것은 객체의 자율성을 높이는 핵심이다.
이것은 **캡슐화**라는 개념과도 관련이 깊다.

## 객체지향의 본질

#### 객체지향이란?

- 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고 객체를 이용해서 시스템을 분할하는 방법이다.

#### 자율적인 객체란?

- **상태**와 **행위**를 함께 지니며 스스로 자기 자신을 책임지는 객체를 의미한다.

#### 객체란?

- 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다.
- 각 객체는 협력 내에서 정해진 **역할**을 수행한다.
- 이때 역할은 **관련된 책임의 집합**이다.
- 객체는 다른 객체와 협력하기 위해 **메세지를 전송**하고, 메세지를 수신한 객체는 메세지를 처리하는 데에 적합한 **메서드**를 자율적으로 선택한다.

### 객체를 지향하라

- 객체지향에서 클래스가 객체와 동일시 되는 의미는 아니다.
- 클래스는 객체지향 프로그래밍에서 중요한 구성요소지만 객체지향의 핵심을 이루는 중심 개념은 아니다.

#### 훌륭한 객체지향 설계자

- 훌륭한 객체지향 설계자가 되기 위해서는 코드를 담는 클래스의 관점에서 벗어나야 한다.
- 메세지를 주고 받는 객체의 관점으로 사고의 중심을 전환해야 한다.
- 중요한 것은 어떤 클래스가 필요한지가 아니라 어떤 객체들이 어떤 메세지를 주고 받으며 협력하는 지가 더 중요하다.
- 핵심은 **적절한 책임을 수행하는 역할 간의 유연하고 견고한 협력 관계를 구축하는 것**이다.
- 클래스의 구조와 메서드에 대한 집중보다 **객체의 역할, 책임, 협력에 집중하자.**