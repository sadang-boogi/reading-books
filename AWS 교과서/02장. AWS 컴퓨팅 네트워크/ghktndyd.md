# 2장. AWS 컴퓨팅 서비스

컴퓨팅은 답을 구하고 추정하는 행위다. (컴퓨트의 뜻이 '계산하다', '답을 구하다' 이런 뜻임)

컴퓨팅은 전문적으로 수행하는 장비들이 있는데 **서버**가 대표적이다. 서버는 전문성과 특수성을 위해서 일반 컴퓨터에 비해서 높은 사양인 컴퓨팅 자원이다. 서버는 온프레미스로도 가능하지만 퍼블릭 클라우드 환경이라면
자원을 제공받아서 가상 서버를 구성하여 워크로드 구성이 가능하다.

> 워크로드: 컴퓨팅 작업 또는 프로세스와 해당 작업에 필요한 컴퓨팅, 스토리지, 메모리 및 네트워크 리소스를 가리킨다. 쉽게 이야기하면 '컴퓨터 사양'을 말하는 듯

---

- AWS 컴퓨팅 서비스: 퍼블릭 클라우드에서 컴퓨팅 자원으로 워크로드를 수행 가능한 서비스

**AWS 컴퓨팅의 주요 서비스**

- **EC2** (Elastic Compute Cloud): 클라우드 환경에서 서버 자원을 인스턴스라는 가상머신 형태로 제공하는 가장 일반적인 서비스

- **ECS** (Elastic Container Service): EC2 기반 관리형 클러스터에서 실행되는 컨테이너 형태의 자원에 대해 배포, 스케줄링, 스케일링 등을 관리하는 서비스

- **Lambda**: 서버리스 컴퓨팅 서비스, 서버리스는 별도의 서버 설정이 필요 없는 환경을 제공하여 코드만 실행해주는 서비스

- **Lightsail**: 독립적인 환경을 제공하는 컴퓨팅 서비스

단어들 중 Elastic은 '탄력적인'이라는 뜻, 그만큼 컴퓨팅 자원을 유연하게 축소/확대가 가능하다는 의미임

주로 EC2를 쓰는데 EC2는 인스턴스라고 부르는 가상 컴퓨팅 환경을 기반으로 하면서 AMI(Amazon Machine Image)를 이용해서 인스턴스에 필요한 소프트웨어 정보를 정의

---

### EC2 인스턴스

인스턴스는 가상의 컴퓨팅 환경이다. CPU, 메모리지, 스토리지, 네트워킹 용량 등 다양한 것을 결정할 수 있도록 인스턴스 유형도 다양하다.

인스턴스 유형은 범용, 컴퓨팅 최적화, 가속화된 컴퓨팅, 스토리지 최적화로 사용자 용도에 맞게 분류된다.
> `t2.micro`
> - `t2`: `t`는 용도별 분리 코드, `2`는 인스턴스 세대 (숫자가 클수록 최신)
> - `micro`: 인스턴스 크기, 크기가 클 수록 용량 증가 및 가격도 증가

> https://aws.amazon.com/ko/ec2/instance-types/ 에 가면 유형들을 볼 수 있음

인스턴스 상태는 7가지

- 실행 중
- 대기 중
- 중지 중
- 중지 됨
- 재부팅
- 종료 중
- 종료 됨

여기서 중지됨은 일시 중지고, 종료됨은 아예 삭제된 거니까 조심해야 된다.

**AMI**는 인스턴스 시작할 때 필요한 정보(운영체제, 소프트웨어)를 선택할 수 있도록 제공되는 템플릿이다. 사용자 정의도 된다.

**EC2의 스토리지**는 인스턴스 스토어, 블록 스토리지인 EBS로 나눠진다.

**인스턴스 스토어**는 인스턴스에 직접 붙어있는 스토리지다. 일부 인스턴스는 인스턴스 스토어가 없다.
직접 붙어 있으니까 매우 빠른 I/O 성능을 보장한다. 하지만 인스턴스를 종료하면 인스턴스 스토어 데이터도 모두 사라진다. (장기 보관해야 하는 데이터는 인스턴스 스토어에 저장하지 않기)

**EBS**는 쉽게 말해서 외장하드다. 인스턴스가 중지돼도 EBS 내에 있는 데이터는 유지할 수 있다. EBS는 인스턴스하고 네트워킹으로 연결되기 때문에 다른 인스턴스에도 연결할 수 있다.

**VPC**는 AWS 퍼블릭 클라우드 안에서 논리적으로 격리된 가상 클라우드 네트워크다. EC2는 하나의 VPC 안에 생되어 네트워킹 된다.

**네트워크 인터페이스**는 EC2가 네트워킹을 수행할 때 필요한 존재다. AWS에서는 ENI(Elastic Network Interface)라는 논리적인 네트워크 인터페이스가 VPC 내에 생성된다. 그리고 ENI를
통해서 EC2와 연결해서 네트워킹한다.

ENI에는 **IP 주소**가 있다. 프라이빗 IP는 내부 구간 통신을 위한 사설 IP고, 퍼블릭 IP는 외부 구간의 통신을 위한 공인 IP이다.

**보안 그룹**은 EC2의 송수신 트래픽을 제어하는 가상 방화벽이다. EC2를 기준으로 **수신 트래픽에 대한 인바운드 규칙**, **송신 트래픽에 대한 아웃바운드 규칙**으로 이뤄져있다.

**키 페어**는 EC2 인스턴스에 연결시 자격을 증명하는 보안 키다. 퍼블릭 키는 EC2 인스턴스 내에 저장되고, 프라이빗 키는 사용자의 컴퓨터에 저장된다.

**EC2 모니터링**은 서비스 안정성과 가용성, 성능 유지에 필요하다. 모니터링을 수행할 때는 계획을 정의해서 생성해야 한다.

1. 모니터링 목표
2. 모니터링 대상 지원
3. 모니터링 빈도
4. 모니터링 수행 도구
5. 모니터링 작업을 수행할 사람
6. 문제가 발생할 때 경보를 알려야 할 대상

AWS에도 당연히 모니터링 도구들이 있다. 모니터링 도구는 수동 모니터링 도구, 자동 모니터링 도구로 나눠진다.

수동은 관리자가 직접 모니터링을 하는 것이다. EC2의 대시보드에서 확인하거나 Amazon CloudWatch라는 서비스를 이용할 수 있다.

자동은 자원의 임계값을 정하고 초과시에 경보를 내리는 형태다. 이것 역시 Amazon CloudWatch가 있다. 임계값 초과시 경보는 Amazon SNS라는 서비스가 있다.

