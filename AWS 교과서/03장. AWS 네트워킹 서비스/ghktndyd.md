# 3장. AWS 네트워킹 서비스

**네트워킹**: IT 자원 간 연결하여 통신하는 환경

IP는 인터넷 상에서 IT 자원을 식별하는 고유한 주소다. IP 주소는 통신 용도에 따라서 퍼블릭 IP와 프라이빗 IP로 분류한다.

- 퍼블릭 IP: 실제 인터넷에서 사용하는 용도 (공인 IP)
- 프라이빗 IP: 인터넷이 아닌 독립된 네트워크 내부에서만 사용하는 용도 (사설 IP)

**IP**는 할당하는 방식에 따라서 고정 IP와 유동 IP로 분류된다. 고정 IP는 네트워크 관리자가 수동으로 할당하는 방식이며, 유동 IP는 특정 서버의 IP 주소 범위에 따라서 동적으로 할당하는 방식이다.

**유동 IP**는 **DHCP 프로토콜**을 통해서 주소를 제공하는 서버와 주소를 받는 클라이언트로 구성되며 IP 주소는 임대하는 형태다.

**서브넷과 서브넷 마스크**

- 네트워크 환경은 거대하다.
- 서브넷은 부분 네트워크를 의미한다.
- 서브넷 마스크는 서브넷을 구분하는 식별자 역할이다.

서브넷 마스크는 IP 주소와 동일하게 32비트 구조에 네트워크 ID와 호스트 ID로 구성되어 있다. 여기서 **네트워크 ID는 서브넷을 구분하는 기준 값**이고, **호스트 ID는 동일 서브넷 내에서 대상을 구분하는
기준 값**이다.

> 만약 `192.168.100.1`의 네트워크 ID는 `192.168.100`이고, 호스트 ID는 `1`이다.

**라우팅**은 네트워킹 통신시 목적지 경로를 선택하는 작업이다. 그리고 이를 수행하는 장비가 **라우터**다.

**TCP**는 연결형 프로토콜이다. 연결돼서 전송 여부를 확인하기 때문에 신뢰성이 좋다. 하지만 느리다.

**UDP**는 비연결형 프로토콜이다. 신뢰성을 보장하진 않는다. 하지만 빠르다.

---

AWS 네트워킹 서비스는 안정성과 보안성, 성능을 보장받는 애플리케이션을 만들 수 있도록 도와준다.

**리전**은 데이터 센터의 물리적인 위치를 의미한다.

**Intra-AZ 연결**은 리전 내부의 가용 영역을 연결하는 것을 의미한다. 여기서 가용 영역은 리전 내부의 논리적인 데이터 센터의 집합이다.

**트랜짓 센터 연결**은 여러 VPC, 온프레미스 네트워크, 그리고 다른 AWS 계정 간의 네트워크 연결을 중앙에서 관리하고 라우팅할 수 있게 해주는 AWS의 네트워크 허브 서비스이다.

**엣지 POP**은 엣지 로케이션과 엣지 캐시로 구성된다.

- 엣지 로케이션은 사용자가 가장 가까운 위치에서 컨텐츠를 전달받도록 해준다. 주로 CloudFront 같은 CDN 서비스에서 사용된다.
- 엣지 캐시는 자주 요청되는 데이터를 엣지 로케이션에 캐싱하여 원본 서버로 가는 트래픽을 줄이고 응답 속도를 높이는 역할이다.

---

AWS의 네트워킹은 AWS의 다양한 자원이 서로 원활하게 통신할 수 있도록 도와준다.

- **VPC**: 사용자 전용 가상 프라이빗 클라우드 네트워크이다.
- **Transit Gateway**: VPC와 온프레미스 네트워크를 연결하는 게이트웨이의 역할의 서비스
- **Route 53**: AWS의 관리형 DNS 서비스

**리전과 VPC**
Amazon VPC는 리전마다 독립적으로 구성된다. 만약 서울 리전에 VPC를 생성했다면 서울 리전에만 VPC가 있고, 다른 리전에는 없다. 또 리전 내에는 다수의 VPC를 생성할 수 있고, 각 VPC는 서로
독립적이다.

> VPC는 같은 리전이나 다른 리전에 있는 VPC들과 서로 연결해서 클라우드 네트워크를 확장할 수 있다.

**서브넷과 가용 영역**
VPC 에서도 서브넷을 이용해서 분리된 네트워크로 구성할 수 있다. 그리고 서브넷은 반드시 하나의 가용 영역에 종속적으로 위치한다.

**IP CIDR**
IP CIDR은 네트워크에 할당할 수 있는 IP 주소 범위를 표현하는 방법이다. VPC는 내부에 생성될 서브넷에 IP를 할당하기 위해서 IP CIDR을 가지고 있다.

**가상 라우터와 라우팅 테이블**
VPC를 생성하면 가상 라우터도 같이 생성된다. 가상 라우터는 가상 라우팅 테이블을 보유하고 있고, 이를 통해 경로를 식별한다. 기본적으로 생성되는 가상 라우팅 테이블 마록도 라우팅 테이블은 더 만들 수 있다.
자고로 라우팅 테이블은 목적지 대상의 IP CIDR 블록과 타깃 대상으로 구성되어 있다.

**보안 그룹과 네트워크 ACL**
VPC는 보안 그룹과 네트워크 ACL(Access Control List) 같은 가상 방화벽 기능을 제공한다. 이것들은 트래픽 접근 통제가 주 목적이다.

> 보안 그룹과 네트워크 ACL의 가장 큰 차이점은 접근 제어 대상이 다르다. 보안 그룹은 인스턴스와 같은 자원 접근을 제어하고, 네트워크 ACL은 서브넷 접근을 제어한다.

**인터넷 게이트웨이**
VPC는 프라이빗 클라우드 네트워크 환경이다. 이는 외부 인터넷과 연결되지 않은 독립적인 네트워크라는 뜻이다. 만약 외부 인터넷과 연결이 필요하다면 인터넷 게이트웨이라는 자원을 생성하고 Amazon VPC와 연결해서
통신해야 한다. 여기서 인터넷 게이트웨이는 VPC와 인터넷의 논리적인 연결 관문이다.

**NAT 게이트웨이**
NAT 게이트웨이는 프라이빗 서브넷에서 외부 인터넷으로 통신하는 관문이다. 프라이빗 IP를 퍼블릭 IP로 변환하여 외부 인터넷과의 통신 환경을 만든다.
프라이빗 서브넷은 외부 인터넷과 단절되어 있지만 NAT 게이트웨이를 통해서 프라이빗 IP를 퍼블릭 IP로 변환하면 외부 인터넷과 통신할 수 있다.

위 말을 잘 정리해보면 **퍼블릭 서브넷은** 퍼블릭 IP 주소를 이미 갖고 있기 때문에 **인터넷 게이트웨이만 사용하면 외부 인터넷과 통신할 수 있다.**

반면 **프라이빗 서브넷**은 **프라이빗 IP를 NAT 게이트웨이를 통해서 퍼블릭 IP로 변환하고, 그 퍼블릭 IP를 갖고 인터넷 게이트웨이한테 가야지만 외부 인터넷과 소통이 가능하다.**

**VPC 피어링**
서로 다른 VPC끼리 연결하는 기능이다. 동일 리전뿐만 아니라 다른 리전도 되고, 다른 계정 VPC도 된다.

**전송 게이트웨이**
다수의 VPC나 온프레미스를 단일 지점으로 연결하는 **중앙 집중형 라우터**




